#!/usr/bin/env bash
set -e
set -o pipefail

export CI=true # also set by ci server, but helps when running locally

export SOURCEMAPS=false # for building production js assets with sourcemap

# building with sbt needs around 2G, 300M Metaspace
export _JAVA_OPTIONS="-Xms2000M -Xmx5000M -XX:MaxMetaspaceSize=500M -XX:+CMSClassUnloadingEnabled -XX:+UseConcMarkSweepGC"

sbt core/docker dbMigration/docker webApp/docker
